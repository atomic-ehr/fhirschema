{
  "url": "http://hl7.org/fhir/StructureDefinition/vitalsigns",
  "derivedFrom": "StructureDefinition/34d4d513-3e4c-401a-b4e0-50920ac99f93",
  "constraints": {
    "vs-2": {
      "human": "If there is no component or hasMember element then either a value[x] or a data absent reason must be present.",
      "severity": "error",
      "expression": "(component.empty() and hasMember.empty()) implies (dataAbsentReason.exists() or value.exists())"
    }
  },
  "id": "09be641f-3eeb-437f-84f5-b8ecf3b08e68",
  "base": "http://hl7.org/fhir/StructureDefinition/Observation",
  "name": "vitalsigns",
  "extension": [
    {
      "url": "http://hl7.org/fhir/StructureDefinition/structuredefinition-summary",
      "valueMarkdown": "\"#### Complete Summary of the Mandatory Requirements\n\n1.  One status in `Observation.status`which has a [required](http://build.fhir.org/terminologies.html#extensible) binding to:\n    -    [ObservationStatus] value set.\n1.  A category in `Observation.category` which must have:\n    -   a fixed `Observation.category.coding.system`=\"http://terminology.hl7.org/CodeSystem/observation-category\"\n    -   a fixed `Observation.category.coding.code`= \"vital-signs\"\n\n1.  A code in `Observation.code`\n    -   a fixed `Observation.code.coding.system`= \"http://loinc.org\"\"\n    -   a LOINC code in `Observation.code.coding.code` which has an [extensible](http://build.fhir.org/terminologies.html#extensible) binding to:\n         -   [Vital Signs] value set.\n                \n1.  One patient in `Observation.subject`\n1.  A date and time in `effectiveDateTime` or `effectivePeriod`\n1.  Either one `Observation.value[x]` or, if there is no value, one code in `Observation.DataAbsentReason`\n    -   if a vital sign measure then:\n        -  One numeric value in Observation.valueQuantity.value\n        - a fixed Observation.valueQuantity.system=\"http://unitsofmeasure.org\"\n        - a UCUM unit code in Observation.valueQuantity.code which has an required binding to the [Vital Signs Units] value set.\n    -   Observation.DataAbsentReason is bound to [Observation Value\n        Absent Reason] value set.\n\n1.  When using a panel code to group component observations (Note: See\n    the comments regarding blood pressure in the table above), one or\n    more `Observation.component.code` each of which must have:\n    -   a fixed\n        `Observation.component.code.coding.system` =\"\"http://loinc.org\"\"\n         -   a LOINC code in `Observation.code.coding.code` which has an [extensible] binding to:\n             -   [Vital Signs Units] value set.\n\n1.  Either one `Observation.component.valueQuantity` or, if there is\n    no value, one code in `Observation.component.DataAbsentReason`\n    -   Observation.component.DataAbsentReason is bound to [Observation\n        Value Absent Reason] value set.\n\n1.  When using a panel code to group observations, one or more reference\n    to Vitals Signs Observations in `Observation.related.target`\n    -   a fixed `Observation.related.type`= \"has-member\"\"\n\n [Vital Signs]: valueset-observation-vitalsignresult.html\n  [Vital Signs Units]: valueset-ucum-vitals-common.html\n  [extensible]: terminologies.html#extensible\n  [ObservationStatus]: valueset-observation-status.html\n [Observation Value Absent Reason]: valueset-data-absent-reason.html\n[required]: terminologies.html#required\""
    },
    {
      "url": "http://hl7.org/fhir/StructureDefinition/structuredefinition-fmm",
      "valueInteger": 5
    },
    {
      "url": "http://hl7.org/fhir/StructureDefinition/structuredefinition-wg",
      "valueCode": "oo"
    },
    {
      "url": "http://hl7.org/fhir/StructureDefinition/structuredefinition-standards-status",
      "valueCode": "trial-use"
    }
  ],
  "kind": "resource",
  "required": [
    "status",
    "category",
    "code",
    "subject",
    "effective",
    "effective"
  ],
  "type": "Observation",
  "version": "4.0.1",
  "resourceType": "FHIRSchema",
  "elements": {
    "derivedFrom": {
      "type": "Reference",
      "refers": [
        "http://hl7.org/fhir/StructureDefinition/DocumentReference",
        "http://hl7.org/fhir/StructureDefinition/ImagingStudy",
        "http://hl7.org/fhir/StructureDefinition/Media",
        "http://hl7.org/fhir/StructureDefinition/QuestionnaireResponse",
        "http://hl7.org/fhir/StructureDefinition/MolecularSequence",
        "http://hl7.org/fhir/StructureDefinition/vitalsigns"
      ]
    },
    "effectiveDateTime": {
      "max": 1,
      "type": "dateTime",
      "short": "Often just a dateTime for Vital Signs",
      "choiceOf": "effective",
      "definition": "Often just a dateTime for Vital Signs.",
      "constraints": {
        "vs-1": {
          "human": "if Observation.effective[x] is dateTime and has a value then that value shall be precise to the day",
          "severity": "error",
          "expression": "($this as dateTime).toString().length() >= 8"
        }
      },
      "mustSupport": true,
      "required-element": true
    },
    "effectivePeriod": {
      "max": 1,
      "type": "Period",
      "short": "Often just a dateTime for Vital Signs",
      "choiceOf": "effective",
      "definition": "Often just a dateTime for Vital Signs.",
      "constraints": {
        "vs-1": {
          "human": "if Observation.effective[x] is dateTime and has a value then that value shall be precise to the day",
          "severity": "error",
          "expression": "($this as dateTime).toString().length() >= 8"
        }
      },
      "mustSupport": true,
      "required-element": true
    },
    "dataAbsentReason": {
      "max": 1,
      "min": 0,
      "type": "CodeableConcept",
      "mustSupport": true
    },
    "component": {
      "short": "Used when reporting systolic and diastolic blood pressure.",
      "elements": {
        "code": {
          "max": 1,
          "type": "CodeableConcept",
          "binding": {
            "strength": "extensible",
            "valueSet": "http://hl7.org/fhir/ValueSet/observation-vitalsignresult"
          },
          "mustSupport": true
        },
        "value": {
          "max": 1,
          "min": 0
        },
        "dataAbsentReason": {
          "max": 1,
          "min": 0,
          "type": "CodeableConcept",
          "mustSupport": true
        }
      },
      "required": ["code"],
      "definition": "Used when reporting systolic and diastolic blood pressure.",
      "constraints": {
        "vs-3": {
          "human": "If there is no a value a data absent reason must be present",
          "severity": "error",
          "expression": "value.exists() or dataAbsentReason.exists()"
        }
      },
      "mustSupport": true
    },
    "value": {
      "max": 1,
      "min": 0
    },
    "hasMember": {
      "type": "Reference",
      "short": "Used when reporting vital signs panel components",
      "refers": [
        "http://hl7.org/fhir/StructureDefinition/QuestionnaireResponse",
        "http://hl7.org/fhir/StructureDefinition/MolecularSequence",
        "http://hl7.org/fhir/StructureDefinition/vitalsigns"
      ],
      "definition": "Used when reporting vital signs panel components."
    },
    "status": {
      "max": 1,
      "type": "code",
      "binding": {
        "strength": "required",
        "valueSet": "http://hl7.org/fhir/ValueSet/observation-status",
        "valueSetVersion": "4.0.1"
      },
      "mustSupport": true
    },
    "subject": {
      "max": 1,
      "type": "Reference",
      "refers": ["http://hl7.org/fhir/StructureDefinition/Patient"],
      "mustSupport": true
    },
    "category": {
      "type": "CodeableConcept",
      "array": true,
      "slicing": {
        "rules": "open",
        "slices": {
          "VSCat": {
            "max": 1,
            "min": 1,
            "type": "CodeableConcept",
            "required": ["coding"],
            "mustSupport": true,
            "elements": {
              "coding": {
                "type": "Coding",
                "array": true,
                "elements": {
                  "code": {
                    "max": 1,
                    "type": "code",
                    "fixed": "vital-signs",
                    "mustSupport": true
                  },
                  "system": {
                    "max": 1,
                    "type": "uri",
                    "fixed": "http://terminology.hl7.org/CodeSystem/observation-category",
                    "mustSupport": true
                  }
                },
                "required": ["system", "code"],
                "mustSupport": true
              }
            }
          }
        },
        "ordered": false,
        "discriminator": [
          {
            "path": "coding.code",
            "type": "value"
          },
          {
            "path": "coding.system",
            "type": "value"
          }
        ]
      },
      "mustSupport": true
    },
    "code": {
      "max": 1,
      "type": "CodeableConcept",
      "short": "Coded Responses from C-CDA Vital Sign Results",
      "binding": {
        "strength": "extensible",
        "valueSet": "http://hl7.org/fhir/ValueSet/observation-vitalsignresult"
      },
      "definition": "Coded Responses from C-CDA Vital Sign Results.",
      "mustSupport": true,
      "requirements": "5. SHALL contain exactly one [1..1] code, where the @code SHOULD be selected from ValueSet HITSP Vital Sign Result Type 2.16.840.1.113883.3.88.12.80.62 DYNAMIC (CONF:7301)."
    },
    "effective": {
      "max": 1,
      "choices": ["effectiveDateTime", "effectivePeriod"]
    }
  },
  "derivation": "constraint"
}
